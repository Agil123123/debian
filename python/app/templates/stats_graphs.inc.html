{#
  Copyright (C) 2014  Matthieu Caneill <matthieu.caneill@gmail.com>
  License: GNU Affero General Public License, version 3 or above.
#}


{% macro render_graphs(suite) %}

{% set granularities = ['1-month', '1-year', '5-years', '20-years'] %}

{% macro historical_trend(metric) -%}
  {% for g in granularities %}
  <div class="stats">
    <a href="{{ url_for('static',
	     filename='img/stats/' + suite + '-' + metric + '-' + g + '.png') }}">
      <img src="{{ url_for('static',
		filename='img/stats/' + suite + '-' + metric + '-' + g + '.png') }}" />
    </a>
    <span>{{ g }}</span>
  </div>
  {% endfor %}
{%- endmacro %}


<h4 class="clear_float">Ctags</h4>
{{ historical_trend('ctags') }}


<h4 class="clear_float">Disk usage</h4>
{{ historical_trend('disk_usage') }}


<h4 class="clear_float">Source lines of code</h4>
{{ historical_trend('sloc') }}

<div class="stats">
  <a href="{{ url_for('static',
	   filename='img/stats/' + suite + '-sloc_pie-current.png') }}">
    <img src="{{ url_for('static',
	      filename='img/stats/' + suite + '-sloc_pie-current.png') }}" />
  </a>
  <span>Language breakdown</span>
</div>


<h4 class="clear_float">Source files</h4>
{{ historical_trend('source_files') }}


<h4 class="clear_float">Source packages</h4>
{{ historical_trend('source_packages') }}


{% endmacro %}
