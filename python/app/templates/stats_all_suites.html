{#
  Copyright (C) 2014  Matthieu Caneill <matthieu.caneill@gmail.com>
  License: GNU Affero General Public License, version 3 or above.
#}

{% extends "base.html" %}

{% block title %}Statistics{% endblock %}

{% block breadcrumbs %}stats{% endblock %}

{% block content %}

<h2>{{ self.title() }}</h2>

<h3>Size &mdash; current</h3>

<table>
  <tr>
    <th></th>
    {% for suite in suites %}
      <th><a href="{{ url_for('stats_html', suite=suite[7:]) }}">
	  {{ suite[7:] }}</a></th>
    {% endfor %}
  </tr>
  <tr>
    <th>Source files</th>
    {% for suite in suites %}
      <td>{{ results[suite + ".source_files"] | format_big_num }}</td>
    {% endfor %}
  </tr>
  <tr>
    <th>Source packages</th>
    {% for suite in suites %}
      <td>{{ results[suite + ".source_packages"] | format_big_num }}</td>
    {% endfor %}
  </tr>
  <tr>
    <th>Disk usage (kB)</th>
    {% for suite in suites %}
      <td>{{ results[suite + ".disk_usage"] | format_big_num }}</td>
    {% endfor %}
  </tr>
  <tr>
    <th>Ctags</th>
    {% for suite in suites %}
      <td>{{ results[suite + ".ctags"] | format_big_num }}</td>
    {% endfor %}
  </tr>
  <tr>
    <th>SLOC</th>
    {% for suite in suites %}
      <td>{{ results[suite + ".sloccount"] | format_big_num }}</td>
    {% endfor %}
  </tr>
</table>

<h3>Sloccount &mdash; current</h3>

<div>
<span class="sidechart">
  <a href="{{ url_for('static',
	   filename='img/stats/ALL-sloc_pie-current.png') }}">
    <img src="{{ url_for('static',
	      filename='img/stats/ALL-sloc_pie-current.png') }}" />
  </a>
</span>
<table>
  <tr>
    <th></th>
    {% for suite in suites %}
      <th><a href="{{ url_for('stats_html', suite=suite[7:]) }}">
	  {{ suite[7:] }}</a></th>
    {% endfor %}
  </tr>
  <tr>
    <th>Total</th>
    {% for suite in suites %}
      <td>{{ results[suite + ".sloccount"] | format_big_num }}</td>
    {% endfor %}
  </tr>
  {% for lang in languages|sort %}
    <tr>
      <th>{{ lang }}</th>
      {% for suite in suites %}
        <td>{{ results[suite + ".sloccount." + lang] | format_big_num }}</td>
      {% endfor %}
    </tr>
  {% endfor %}
</table>
</div>

<h3>Historical trends</h3>

{% import "stats_graphs.inc.html" as stats_graphs %}
{{ stats_graphs.render_graphs("ALL") }}

{% endblock %}
