#    -*- mode: org -*-

* TODO tarball-in-tarball 					  :infra:web:
  Explode nested tarballs, partly for some packaging habits still present in
  the archive (although they should die a horrible death), more importantly due
  to upstream shipping tarballs.
  
  From #debian-qa:
  > 04:43 < pabs> zack: well apart from tarball-in-tarball some upstreams ship
  >               tarballs/zip files
  > 04:49 < pabs> zack: apt-file counts 2022 .zip files and 6892 .tar* files,
  >               242 .tgz, 22 .tbz* and 7 txz files in source packages
  
** tentative solution
*** web: discriminate on trailing slash
    - /foo/bar/baz.tar.gz     -> download the tarball
    - /foo/bar/baz.tar.gz/qux -> navigate in it
*** infra: not clear
    We need some FS attribute to avoid clashes tar-vs-extraction-dir and
    minimize the risks of collisions. Could be some highly unlikely suffix (but
    then it will need to be excluded via apache navigation from /data/). Or
    some metadata via xattr. Or a separate hierarchy for extracted tarballs.

* TODO push update						      :infra:
  - best option in terms of bandwidth is ftp.de.d.o
  - need to figure out how to ssh into the machine (via the jumphost) w/o
    having a dedicated INRIA account

* TODO better language detection using shebang lines		:web:hilight:
  as suggested in the LWN thread at https://lwn.net/Articles/557371/
** see Geany approach and code
   http://sources.debian.net/src/geany/1.22%2Bdfsg-2/src/filetypes.c#L887

* TODO popup messages between lines instead of on the right	  :web:popup:
  - rationale #1: popups are invisible for very long source code lines
    e.g.: http://sources.debian.net/src/vim/2:7.3.547-7/runtime/syntax/sicad.vim?hl=133&msg=133%3Atest%3Atest#L133
  - rationale #2: it is the only sane way to show multiple pop-ups avoding
    they clash with one another

* TODO multiple popup messages					  :web:popup:
  to be able to show multiple error( location)s on the same source file

* TODO improve extension<->language mapping			:web:hilight:
  reusing the one of Geany as suggested in https://lwn.net/Articles/557712/ .
  See
  http://sources.debian.net/src/geany/1.22%2Bdfsg-2/data/filetype_extensions.conf

* TODO Git commit notifications to #debian-qa			    :dev:irc:

* TODO search based on the file name				 :web:search:
  should be feasible, if the mlocate database is to be believed. Maybe we
  should simply use it, making the indexing available *in* the VM?

* TODO replace etc/webconfig.py with a Python ini-like conffile	   :web:conf:
  Rationale: a Python module is dangerous and the only fancy functionality we
  need is interpolation, which is supported by ConfigParser. The relative
  import trick used by app.config.from_pyfile can be used for ConfigParser
  instead.

* TODO highlight #Lxxx lines					     :web:ui:
  On Thu, Jun 13, 2013 at 12:19:58AM +0200, Joachim Breitner wrote:
  > An URL like
  > http://sources.debian.net/src/cairo/1.12.14-4/boilerplate/cairo-boilerplate-xcb.c#L395
  > should highlight that line. And ideally put it in the middle of the
  > screen, instead of the top (this might require some JS fiddling).

* TODO allow symlink within same package/version	       :web:security:
  currently /all/ symlinks are forbidden for security reasons

* TODO .pc/ exclusion should become a configuration entry      :web:browsing:
  ..in a more general configuration variable in etc/webconfig.py. Similar to
  HIGHLIGHT_CLASSES, although we probably don't need regex for exclusions. See
  http://anonscm.debian.org/gitweb/?p=qa/debsources.git;a=blob;f=web/flask/app/models_app.py;hb=HEAD#l166

* TODO link to package VCS					  :web:links:
  On Wed, Jun 19, 2013 at 05:13:18PM +0200, Martin Quinson wrote:
  > It would be good to have a link to the VCS somewhere on the interface. I
  > know I can find it through the PTS, but that could be more straightforward,
  > maybe.
  Issue here: good balance between functionalities and redoing stuff already
  done elsewhere, and in particular in the PTS.
  Idea: maybe we can exploit the forthcoming PTS REST interface and load this
  kind of info AJAX-ly?

* TODO add security archive (?)					      :infra:
  to do so, we need to do a separate debmirror run, as the security archive is
  not hosted on the regular mirror network

* TODO package debsources with python distribute 	      :web:packaging:
  it will simple things like imports and the deployment would be easier

* TODO shutter effect					    :web:hilight:css:
  When we highlight a line, we have to use a display:inline tag (whose
  rendering isn't cool, because an highlighted block doesn't have the
  same width verywhere). With a display:blog tag, newlines are added
  by the browser/highlight.js (?), because tags conflicts with
  highlight.js tags (when a hl.js lexem is multiline).
  Try to highlight lines 3-4 of this to see the bug:

  def hello():
     """aaa
     aaa
     """ zzz = 3

  Edit: the browser close tags automatically, and since our tags
  aren't correct (ie
  <span class="string"><div class="highlight">foo</span></div>
  ), closing display:block tags are inserted.

 Debugging: maybe with inline-block and other css tricks

* TODO [0/0] alternative syntax highlighting toolkits		:web:hilight:
