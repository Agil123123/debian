#    -*- mode: org -*-

* TODO tarball-in-tarball 					  :infra:web:
  Explode nested tarballs, partly for some packaging habits still present in
  the archive (although they should die a horrible death), more importantly due
  to upstream shipping tarballs.
  
  From #debian-qa:
  > 04:43 < pabs> zack: well apart from tarball-in-tarball some upstreams ship
  >               tarballs/zip files
  > 04:49 < pabs> zack: apt-file counts 2022 .zip files and 6892 .tar* files,
  >               242 .tgz, 22 .tbz* and 7 txz files in source packages
  
** tentative solution
*** web: discriminate on trailing slash
    - /foo/bar/baz.tar.gz     -> download the tarball
    - /foo/bar/baz.tar.gz/qux -> navigate in it
*** infra: not clear
    We need some FS attribute to avoid clashes tar-vs-extraction-dir and
    minimize the risks of collisions. Could be some highly unlikely suffix (but
    then it will need to be excluded via apache navigation from /data/). Or
    some metadata via xattr. Or a separate hierarchy for extracted tarballs.

* TODO push update						      :infra:
  - best option in terms of bandwidth is ftp.de.d.o
  - need to figure out how to ssh into the machine (via the jumphost) w/o
    having a dedicated INRIA account

* TODO Git commit notifications to #debian-qa			    :dev:irc:
* TODO integrate prefix generation into cron jobs		       :cron:
  - currently it needs ad-hoc runs
  - also: it currently generates a python module outside /cache, which breaks
    the code/data separation

* TODO search based on the file name				 :web:search:
  should be feasible, if the mlocate database is to be believed. Maybe we
  should simply use it, making the indexing available *in* the VM?

* TODO highlight.js is way slower				   :web:perf:
  since it is retrieved from /javascript/highlight
  
* TODO replace etc/webconfig.py with a Python ini-like conffile	   :web:conf:
  Rationale: a Python module is dangerous and the only fancy functionality we
  need is interpolation, which is supported by ConfigParser. The relative
  import trick used by app.config.from_pyfile can be used for ConfigParser
  instead.

* TODO highlight #Lxxx lines					     :web:ui:
  On Thu, Jun 13, 2013 at 12:19:58AM +0200, Joachim Breitner wrote:
  > An URL like
  > http://sources.debian.net/src/cairo/1.12.14-4/boilerplate/cairo-boilerplate-xcb.c#L395
  > should highlight that line. And ideally put it in the middle of the
  > screen, instead of the top (this might require some JS fiddling).

* TODO check symlink dereferencing                             :web:security:
  if it's outside of the pakage -> 403 error
  inside the package -> redirect appropriately

* TODO .pc/ exclusion should become a configuration entry      :web:browsing:
  ..in a more general configuration variable in etc/webconfig.py. Similar to
  HIGHLIGHT_CLASSES, although we probably don't need regex for exclusions. See
  http://anonscm.debian.org/gitweb/?p=qa/debsources.git;a=blob;f=web/flask/app/models_app.py;hb=HEAD#l166

* TODO link to package VCS					  :web:links:
  On Wed, Jun 19, 2013 at 05:13:18PM +0200, Martin Quinson wrote:
  > It would be good to have a link to the VCS somewhere on the interface. I
  > know I can find it through the PTS, but that could be more straightforward,
  > maybe.
  Issue here: good balance between functionalities and redoing stuff already
  done elsewhere, and in particular in the PTS.
  Idea: maybe we can exploit the forthcoming PTS REST interface and load this
  kind of info AJAX-ly?

* TODO add security archive (?)					      :infra:
  to do so, we need to do a separate debmirror run, as the security archive is
  not hosted on the regular mirror network
