{#
  Copyright (C) 2013  Matthieu Caneill <matthieu.caneill@gmail.com>
  License: GNU Affero General Public License, version 3 or above.
#}

{% extends "base.html" %}

{% block head %}
{{ super() }}
<style>
  .url{display: block; /*margin-left: 50px;*/}
</style>
{% endblock %}

{% block title %}API documentation{% endblock %}
{% block content %}
{% set url_prefix = "http://" + config.DOMAIN %}

<h2>{{ self.title() }}</h2>

<p>You can query anything in the Debian sources, and get a JSON object
  which allows you to navigate into packages and source files.</p>

<p>The JSON result will be pretty-printed, unless the X-Requested-With header is set to XmlHttpRequest.</p>

<h3>Search</h3>

By accessing the following URL:
<span class="url">{{ url_prefix }}/api/search/<strong>query</strong></span>
<a href="{{ url_prefix }}/api/search/hello">See example</a>

<h3>Package list</h3>

<h4>All packages</h4>

<span class="url">{{ url_prefix }}/api/list/</span>

<h4>By prefix</h4>

<span class="url">{{ url_prefix
  }}/api/prefix/<strong>prefix</strong></span>
<a href="{{ url_prefix }}/api/prefix/libz">See example</a>

<h3>Navigation in source folders and files</h3>

<span class="url">{{ url_prefix
  }}/api/src/<strong>packagename</strong></span>
<a href="{{ url_prefix }}/api/src/lolcat">See example</a>

<span class="url">{{ url_prefix
  }}/api/src/<strong>packagename</strong>/<strong>version</strong></span>
<a href="{{ url_prefix }}/api/src/ocaml/4.00.1-1">See example</a>

<span class="url">{{ url_prefix
  }}/api/src/<strong>packagename</strong>/<strong>version</strong>/<strong>path/to/file_or_folder</strong></span>
<a href="{{ url_prefix }}/api/src/linux/3.8.13-1/kernel/kmod.c">See
  example</a>


{% endblock %}
